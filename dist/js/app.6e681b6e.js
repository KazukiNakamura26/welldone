(function(e){function t(t){for(var n,i,o=t[0],l=t[1],u=t[2],d=0,p=[];d<o.length;d++)i=o[d],r[i]&&p.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("1356"),r=a.n(n);r.a},1356:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=a("bb71");a("da64");n["a"].use(r["a"],{iconfont:"md"});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("SharedHeader"),a("v-content",[a("router-view")],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-layout",{attrs:{"text-xs-center":"",wrap:""}},[a("v-flex",{attrs:{"mb-4":""}},[a("h1",{staticClass:"display-2 mb-3"},[e._v("\n        隣の人を褒めよう！"),a("span",[e._v(e._s(e.name))])])]),a("v-flex",{attrs:{"mb-5":"",xs12:""}},[a("h2",{staticClass:"headline font-weight-bold mb-3"},[e._v("Praise")]),a("v-layout",{attrs:{"justify-center":""}},[a("v-btn",{attrs:{flat:""},on:{click:e.signOut}},[a("span",[e._v("サインアウト")])])],1)],1)],1)],1)},l=[],u=(a("96cf"),a("3b8d")),c=a("bc3a"),d=a.n(c),p=a("8aa5"),f=a.n(p),v={name:"TopPage",data:function(){return{msg:"Welcome to Your Vue.js App",name:""}},methods:{signOut:function(){var e=this;f.a.auth().signOut().then(function(){localStorage.removeItem("jwt"),e.$router.push("/signin")})},apiPublic:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://welldone-api.herokuapp.com/public");case 2:t=e.sent,this.msg=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),apiPrivate:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://welldone-api.herokuapp.com/private",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});case 2:t=e.sent,this.name=t.data;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("https://welldone-api.herokuapp.com/private",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});case 3:t=e.sent,this.name=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}()},m=v,h=a("2877"),g=a("6544"),b=a.n(g),w=a("8336"),x=a("a523"),_=a("0e8f"),y=a("a722"),k=Object(h["a"])(m,o,l,!1,null,null,null),V=k.exports;b()(k,{VBtn:w["a"],VContainer:x["a"],VFlex:_["a"],VLayout:y["a"]});var C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[a("v-toolbar",{attrs:{app:""}},[a("v-toolbar-title",{staticClass:"headline text-uppercase"},[a("span",[e._v("Well")]),a("span",{staticClass:"font-weight-light"},[e._v("done")])]),a("v-spacer"),a("v-btn",{attrs:{color:"amber",depressed:"",dark:""},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}},[e._v("\n\t\tMenus\n\t\t")])],1),a("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{staticClass:"pa-1"},[a("v-list-tile-content",[a("v-list-tile-title",[e._v("\n\t\t\t\t\tMenus\n\t\t\t\t")])],1)],1),a("v-list",{staticClass:"pt-0",attrs:{dense:""}},[a("v-divider"),e._l(e.items,function(t){return a("v-list-tile",{key:t.title,attrs:{to:t.tolink},on:{click:function(e){}}},[a("v-list-tile-action",[a("v-icon",[e._v(e._s(t.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)})],2)],1)],1)},S=[],j={name:"SharedHeader",data:function(){return{drawer:null,items:[{title:"Home",icon:"dashboard",tolink:"/"},{title:"About",icon:"question_answer",tolink:"/about"}]}}},I=j,A=a("ce7e"),O=a("132d"),R=a("8860"),P=a("ba95"),T=a("40fe"),$=a("5d23"),q=a("f774"),z=a("9910"),E=a("71d9"),L=a("2a7f"),N=Object(h["a"])(I,C,S,!1,null,null,null),B=N.exports;b()(N,{VBtn:w["a"],VDivider:A["a"],VIcon:O["a"],VList:R["a"],VListTile:P["a"],VListTileAction:T["a"],VListTileContent:$["a"],VListTileTitle:$["b"],VNavigationDrawer:q["a"],VSpacer:z["a"],VToolbar:E["a"],VToolbarTitle:L["a"]});var U={name:"App",components:{HelloWorld:V,SharedHeader:B},data:function(){return{}}},W=U,F=(a("034f"),a("7496")),M=a("549c"),G=Object(h["a"])(W,s,i,!1,null,null,null),H=G.exports;b()(G,{VApp:F["a"],VContent:M["a"]});var D=a("8c4f"),Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"signup"},[a("v-container",[a("h2",{staticClass:"font-weight-bold text-xs-center"},[e._v("SIGN UP")]),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.nameRules,counter:10,label:"名前",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("v-text-field",{attrs:{rules:e.emailRules,label:"メールアドレス",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{type:"password",rules:e.passwordRules,label:"パスワード",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-text-field",{attrs:{type:"password",rules:e.passwordConfirmRules,label:"パスワード確認",required:""},model:{value:e.passwordConfirmation,callback:function(t){e.passwordConfirmation=t},expression:"passwordConfirmation"}}),e.error?a("p",{staticClass:"caption red--text text-xs-center"},[e._v(e._s(e.error))]):e._e(),a("div",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"amber lighten-1 white--text font-weight-bold",attrs:{disabled:!e.valid,outline:"",large:""},on:{click:e.signUp}},[e._v("SIGN UP")])],1)],1),a("p",{staticClass:"text-xs-center"},[e._v("\n            すでにアカウントを持っている方は\n            "),a("router-link",{attrs:{to:"/signin"}},[e._v("こちら")])],1)],1)],1)],1)],1)},J=[],K=(a("7f7f"),a("6b54"),[{code:"auth/invalid-email",message:"メールアドレスの形式が不正です。"},{code:"auth/user-not-found",message:"メールアドレスかパスワードが間違っています。"}]),Q={data:function(){return{errors:K}}},Y={mixins:[Q],name:"Signup",data:function(){var e=this;return{valid:!1,error:null,uid:"",name:"",nameRules:[function(e){return!!e||"名前は必須項目です。"},function(e){return e.length<=10||"名前は10文字以内です。"}],email:"",emailRules:[function(e){return!!e||"メールアドレスは必須項目です。"},function(e){return/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/.test(e)||"正しいメールアドレス形式で入力して下さい。"}],password:"",passwordRules:[function(e){return!!e||"パスワードは必須です。"},function(e){return e&&e.length>=6||"パスワードは6文字以上です。"}],passwordConfirmation:"",passwordConfirmRules:[function(e){return!!e||"パスワード確認は必須です。"},function(t){return t===e.password||"パスワードが一致しません。"}]}},methods:{signUp:function(){var e=this;this.$refs.form.validate()?f.a.auth().createUserWithEmailAndPassword(this.email,this.password).then(function(t){console.log("Create account: ",t.user.email),e.uid=t.user.uid,f.a.auth().signInWithEmailAndPassword(e.email,e.password).then(function(t){t.user.getIdToken().then(function(e){localStorage.setItem("jwt",e.toString())}),e.sendItem(),e.$router.push("/")})}).catch(function(t){t.code===Q.data().errors[0].code?e.error=Q.data().errors[0].message:e.error=Q.data().errors[1].message}):this.snackbar=!0},sendItem:function(){var e=f.a.firestore().collection("users"),t={name:this.name,u_hidden:!1,u_remove:!1};e.doc(this.uid).set(t).then(function(e){}).catch(function(e){console.error("Error adding document: ",e)})}}},X=Y,ee=a("4bd4"),te=a("2677"),ae=Object(h["a"])(X,Z,J,!1,null,null,null),ne=ae.exports;b()(ae,{VBtn:w["a"],VContainer:x["a"],VFlex:_["a"],VForm:ee["a"],VLayout:y["a"],VTextField:te["a"]});var re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"signin"},[a("v-container",[a("h2",{staticClass:"font-weight-bold text-xs-center"},[e._v("SIGN IN")]),a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.emailRules,label:"メールアドレス",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{type:"password",rules:e.passwordRules,label:"パスワード",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.error?a("p",{staticClass:"caption red--text text-xs-center"},[e._v(e._s(e.error))]):e._e(),a("div",{staticClass:"text-xs-center"},[a("v-btn",{staticClass:"amber lighten-1 white--text font-weight-bold",attrs:{disabled:!e.valid,outline:"",large:""},on:{click:e.signIn}},[e._v("SIGN IN")])],1)],1),a("p",{staticClass:"text-xs-center"},[e._v("\n            アカウントを持っていない方は\n              "),a("router-link",{attrs:{to:"/signup"}},[e._v("こちら")])],1)],1)],1)],1)],1)},se=[],ie={mixins:[Q],name:"Signin",data:function(){return{valid:!1,error:null,email:"",emailRules:[function(e){return/.+@.+/.test(e)||"正しいメールアドレス形式で入力して下さい。"}],password:"",passwordRules:[function(e){return!!e||"パスワードは必須です。"}]}},methods:{signIn:function(){var e=this;f.a.auth().signInWithEmailAndPassword(this.email,this.password).then(function(t){t.user.getIdToken().then(function(e){localStorage.setItem("jwt",e.toString())}),e.$router.push("/")},function(t){t.code===Q.data().errors[0].code?e.error=Q.data().errors[0].message:e.error=Q.data().errors[1].message})}}},oe=ie,le=Object(h["a"])(oe,re,se,!1,null,null,null),ue=le.exports;b()(le,{VBtn:w["a"],VContainer:x["a"],VFlex:_["a"],VForm:ee["a"],VLayout:y["a"],VTextField:te["a"]}),n["a"].use(D["a"]);var ce=new D["a"]({mode:"history",base:"/",routes:[{path:"*",redirect:"signIn"},{path:"/",name:"TopPage",component:V,meta:{requiresAuth:!0}},{path:"/signup",name:"Signup",component:ne},{path:"/signin",name:"Signin",component:ue}]});ce.beforeEach(function(e,t,a){var n=f.a.auth().currentUser,r=e.matched.some(function(e){return e.meta.requiresAuth});r&&!n?a("signin"):a()});var de=ce,pe=a("2f62");n["a"].use(pe["a"]);var fe,ve=new pe["a"].Store({state:{},mutations:{},actions:{}});n["a"].config.productionTip=!1;var me={apiKey:"AIzaSyDOWyQAnUmNLPxKlWrrB8N3qj04kGVAfog",authDomain:"welldone-21fc5.firebaseapp.com",databaseURL:"https://welldone-21fc5.firebaseio.com",projectId:"welldone-21fc5",storageBucket:"welldone-21fc5.appspot.com",messagingSenderId:"1004401477630"},he={timestampsInSnapshots:!0};f.a.initializeApp(me),f.a.firestore().settings(he),f.a.auth().onAuthStateChanged(function(e){fe||new n["a"]({router:de,store:ve,render:function(e){return e(H)}}).$mount("#app")})}});
//# sourceMappingURL=app.6e681b6e.js.map